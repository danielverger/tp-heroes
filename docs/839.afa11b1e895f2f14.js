"use strict";(self.webpackChunkw2m_front=self.webpackChunkw2m_front||[]).push([[839],{9839:(A,h,o)=>{o.r(h),o.d(h,{HeroModifyComponent:()=>U});var e=o(5879),n=o(6223),u=o(1896),l=o(311),C=o(1666),c=o(2296),d=o(5195),f=o(2032),m=o(9157),p=o(6385),v=o(4300),g=o(6814),H=o(7700),S=o(2939);let Z=(()=>{class s{constructor(){this.ref=(0,e.f3M)(e.SBq),this.ngModelChange=new e.vpe}onInput(t){this.ref.nativeElement.value=t.toUpperCase();const r=t.toUpperCase();this.onChange&&this.onChange(r),this.onTouched&&this.onTouched()}writeValue(t){this.ref.nativeElement.value=t.toUpperCase()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275dir=e.lG2({type:s,selectors:[["","appUppercase",""]],hostBindings:function(r,i){1&r&&e.NdJ("input",function(M){return i.onInput(M.target.value)})},outputs:{ngModelChange:"ngModelChange"},standalone:!0,features:[e._Bn([{provide:n.JU,useExisting:(0,e.Gpc)(()=>s),multi:!0}])]})}return s})();const b=["inputName"];function y(s,N){1&s&&(e.TgZ(0,"mat-error"),e._uU(1," Name is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA()())}const T=function(){return["/dashboard/heroes"]};let U=(()=>{class s{constructor(){this.isAddHero=!0,this.isSaving=!1,this.route=(0,e.f3M)(u.gz),this.heroesService=(0,e.f3M)(C.P),this.modalService=(0,e.f3M)(l.Z),this.router=(0,e.f3M)(u.F0),this.formBuilder=(0,e.f3M)(n.qu)}ngOnInit(){this.heroForm=this.formBuilder.group({name:["",n.kI.required],id:[{value:"",disabled:!0}]}),this.route.data.subscribe(t=>{this.titleCard=t.title}),this.route.paramMap.subscribe(t=>{if(t.get("id")){this.isAddHero=!1;const r=Number(t.get("id"));this.getHero(r)}})}getHero(t){this.modalService.showLoading(),this.heroesService.getHero(t).subscribe({next:r=>{r?.id?(this.heroForm.patchValue(r),this.inputName.nativeElement.select()):this.modalService.openSnackBar(`Hero with id ${t} not exists`,"error").afterDismissed().subscribe(()=>this.router.navigate(["dashboard/heroes"]))},complete:()=>this.modalService.closeLoading(),error:r=>{this.modalService.closeLoading(),this.modalService.openSnackBar(r,"error")}})}saveHero(){this.isSaving=!0;const t=this.heroForm.getRawValue();(this.isAddHero?this.heroesService.addHero(t):this.heroesService.modifyHero(t)).subscribe({next:i=>{this.modalService.openSnackBar(`Hero ${i.name} ${this.isAddHero?"added":"modified"}!!`,"info").afterDismissed().subscribe(()=>this.router.navigate(["dashboard/heroes"]))},error:i=>{this.modalService.openSnackBar(i,"error"),this.isSaving=!1}})}static#e=this.\u0275fac=function(r){return new(r||s)};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-hero-modify"]],viewQuery:function(r,i){if(1&r&&e.Gf(b,5),2&r){let a;e.iGM(a=e.CRH())&&(i.inputName=a.first)}},standalone:!0,features:[e._Bn([l.Z]),e.jDz],decls:24,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"pt-3","pb-3"],["cdkTrapFocus","",1,"pt-3","row",3,"cdkTrapFocusAutoCapture"],[1,"col-2"],["type","text","matInput","","formControlName","id"],[1,"col-6"],["id","inputName","appUppercase","","type","text","matInput","","formControlName","name"],["inputName",""],[4,"ngIf"],["align","end",1,"p-3"],["mat-flat-button","","type","button",3,"routerLink"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],["saveButton",""]],template:function(r,i){if(1&r&&(e.TgZ(0,"mat-card")(1,"form",0),e.NdJ("ngSubmit",function(){return i.saveHero()}),e.TgZ(2,"mat-card-header",1)(3,"mat-card-title"),e._uU(4),e.qZA()(),e._UZ(5,"mat-divider"),e.TgZ(6,"mat-card-content")(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),e._uU(10,"Id"),e.qZA(),e._UZ(11,"input",4),e.qZA(),e.TgZ(12,"mat-form-field",5)(13,"mat-label"),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",6,7),e.YNc(17,y,4,0,"mat-error",8),e.qZA()()(),e.TgZ(18,"mat-card-actions",9)(19,"button",10),e._uU(20,"Cancel"),e.qZA(),e.TgZ(21,"button",11,12),e._uU(23,"Save"),e.qZA()()()()),2&r){let a;e.xp6(1),e.Q6J("formGroup",i.heroForm),e.xp6(3),e.Oqu(i.titleCard),e.xp6(3),e.Q6J("cdkTrapFocusAutoCapture",i.isAddHero),e.xp6(10),e.Q6J("ngIf",null==(a=i.heroForm.get("name"))?null:a.hasError("required")),e.xp6(2),e.Q6J("routerLink",e.DdM(6,T)),e.xp6(2),e.Q6J("disabled",i.heroForm.invalid||i.isSaving)}},dependencies:[u.Bz,u.rH,c.ot,c.lW,d.QW,d.a8,d.hq,d.dn,d.dk,d.n5,f.c,f.Nt,m.KE,m.hX,m.TO,m.lN,p.t,p.d,H.Is,S.ZX,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,v.rt,v.mK,g.ez,g.O5,Z]})}return s})()}}]);