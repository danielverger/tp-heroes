"use strict";(self.webpackChunkw2m_front=self.webpackChunkw2m_front||[]).push([[735],{6735:(pt,Z,a)=>{a.r(Z),a.d(Z,{HeroesModule:()=>mt});var p=a(1896),S=a(9887),v=a(3566),L=a(2438),D=a(7398),B=a(3620),Y=a(3997),C=a(9397),I=a(3019),M=a(7921),E=a(4664),t=a(5879),u=a(6306),J=a(8504);class R{constructor(){this.pageIndex=0,this.pageSize=10,this.name="",this.sortField="name",this.sortDirection="asc"}}var b=a(9862);let T=(()=>{class o{get lastFilter(){return this._lastFilter}constructor(e){this.http=e,this._lastFilter=new R}getHeroes(e){this._lastFilter=e;let i=(new b.LE).set("pageIndex",e.pageIndex).set("pageSize",e.pageSize).set("sortField",e.sortField).set("sortDirection",e.sortDirection);return e.name&&(i=i.set("name",e.name)),this.http.get("heroes",{params:i}).pipe((0,u.K)(this.handleError))}getHero(e){return this.http.get(`heroes/${e}`).pipe((0,u.K)(this.handleError))}addHero(e){return this.http.post("heroes",e).pipe((0,u.K)(this.handleError))}modifyHero(e){return this.http.put(`heroes/${e.id}`,e).pipe((0,u.K)(this.handleError))}deleteHero(e){return this.http.delete(`heroes/${e}`).pipe((0,u.K)(this.handleError))}handleError(){return(0,J._)(()=>"Something bad happened; please try again later.")}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var O=a(5940);let Q=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-loader"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(i,r){1&i&&t._UZ(0,"mat-spinner",0)},dependencies:[O.Ou]})}return o})();var m=a(7700),f=a(2296);let z=(()=>{class o{constructor(e,i){this.dialogRef=e,this.data=i}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.so),t.Y36(m.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-dialog"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end",1,"p-3"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-button","",3,"mat-dialog-close"]],template:function(i,r){1&i&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",2)(5,"button",3),t._uU(6,"No"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Yes"),t.qZA()()),2&i&&(t.xp6(1),t.Oqu(r.data.title),t.xp6(2),t.hij(" ",r.data.message,"\n"),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[f.lW,m.ZT,m.uh,m.xY,m.H8]})}return o})();var y=a(2939);let x=(()=>{class o{constructor(e,i){this.dialog=e,this.snackBar=i,this.horizontalPosition="end",this.verticalPosition="top"}showLoading(){this.dialogRef||(this.dialogRef=this.dialog.open(Q,{disableClose:!0,panelClass:"loader-dialog"}))}closeLoading(){this.dialogRef?.close(),this.dialogRef=null}confirmDialog(e,i){return this.dialog.open(z,{width:"350px",data:{title:e,message:i}})}openSnackBar(e,i){const r=new y.u_;return r.duration="error"===i?2e3:1200,r.panelClass=`${i}-snackbar`,r.horizontalPosition=this.horizontalPosition,r.verticalPosition=this.verticalPosition,this.snackBar.open(e,"",r)}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(m.uw),t.LFG(y.ux))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var d=a(5195),U=a(6385),g=a(9157),w=a(617),F=a(2032),l=a(5313),G=a(2596),A=a(6814);const $=["inputName"];function K(o,s){1&o&&(t.TgZ(0,"th",16),t._uU(1," Id. "),t.qZA())}function k(o,s){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function P(o,s){1&o&&(t.TgZ(0,"th",16),t._uU(1," Name "),t.qZA())}function j(o,s){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function W(o,s){1&o&&t._UZ(0,"th",18)}const X=function(o){return[o]};function V(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td",17)(1,"button",19),t.NdJ("click",function(){const n=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.deleteHero(n))}),t.TgZ(2,"mat-icon",20),t._uU(3,"delete"),t.qZA()(),t.TgZ(4,"button",21)(5,"mat-icon"),t._uU(6,"edit"),t.qZA()()()}if(2&o){const e=s.$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,X,e.id))}}function q(o,s){1&o&&t._UZ(0,"tr",22)}function _(o,s){1&o&&t._UZ(0,"tr",23)}const tt=function(){return["add"]},et=function(){return[5,10,20]};let ot=(()=>{class o{constructor(e,i,r){this.heroesService=e,this.modalService=i,this.cd=r,this.displayedColumns=["id","name","actions"],this.totalHeroes=0,this.heroesResult=[]}getObservableFilterName(){return(0,L.R)(this.inputName.nativeElement,"keyup").pipe((0,D.U)(e=>e.target.value),(0,B.b)(500),(0,Y.x)((e,i)=>e===i),(0,C.b)(()=>this.paginator.pageIndex=0))}getObersrvableFilters(){return(0,I.T)(this.getObservableFilterName(),this.sort.sortChange,this.paginator.page).pipe((0,M.O)({}),(0,C.b)(()=>this.modalService.showLoading()),(0,E.w)(()=>this.heroesService.getHeroes({pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortDirection:this.sort.direction,name:this.inputName.nativeElement.value})),(0,C.b)(()=>this.modalService.closeLoading()))}ngAfterViewInit(){const{pageIndex:e,pageSize:i,name:r,sortDirection:n,sortField:h}=this.heroesService.lastFilter;this.paginator.pageIndex=e,this.paginator.pageSize=i,this.inputName.nativeElement.value=r,this.sort.active=h,this.sort.direction=n,this.cd.detectChanges(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.getObersrvableFilters().subscribe({next:({heroes:H,total:ht})=>{this.heroesResult=H,this.totalHeroes=ht},error:H=>{this.modalService.openSnackBar(H,"error"),this.modalService.closeLoading()}})}deleteHero(e){this.modalService.confirmDialog("Delete Hero",`Are you sure to delete ${e.name}?`).afterClosed().subscribe(i=>i&&this.heroesService.deleteHero(e.id).subscribe({next:r=>r&&this.modalService.openSnackBar(`${e.name} deleted!`,"info").afterOpened().subscribe(()=>{this.paginator.page.next(this.paginator)}),error:r=>this.modalService.openSnackBar(r,"error")}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(T),t.Y36(x),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-heroes-list"]],viewQuery:function(i,r){if(1&i&&(t.Gf(S.NW,5),t.Gf(v.YE,5),t.Gf($,5)),2&i){let n;t.iGM(n=t.CRH())&&(r.paginator=n.first),t.iGM(n=t.CRH())&&(r.sort=n.first),t.iGM(n=t.CRH())&&(r.inputName=n.first)}},decls:29,vars:8,consts:[[1,"pt-3","pb-3"],[1,"d-flex","justify-content-between","pt-3"],[1,"col-5"],["matInput",""],["inputName",""],["mat-stroked-button","",3,"routerLink"],["mat-table","","matSort","","matSortDisableClear","",1,"hero-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of heroes",3,"length","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","matTooltip","delete",3,"click"],["color","warn"],["mat-icon-button","","matTooltip","edit",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title"),t._uU(3,"Heroes"),t.qZA()(),t._UZ(4,"mat-divider"),t.TgZ(5,"mat-card-content")(6,"div",1)(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",3,4),t.qZA(),t.TgZ(12,"button",5)(13,"mat-icon"),t._uU(14,"add"),t.qZA(),t._uU(15," Add Hero "),t.qZA()(),t.TgZ(16,"table",6),t.ynx(17,7),t.YNc(18,K,2,0,"th",8),t.YNc(19,k,2,1,"td",9),t.BQk(),t.ynx(20,10),t.YNc(21,P,2,0,"th",8),t.YNc(22,j,3,3,"td",9),t.BQk(),t.ynx(23,11),t.YNc(24,W,1,0,"th",12),t.YNc(25,V,7,3,"td",9),t.BQk(),t.YNc(26,q,1,0,"tr",13),t.YNc(27,_,1,0,"tr",14),t.qZA(),t._UZ(28,"mat-paginator",15),t.qZA()()),2&i&&(t.xp6(12),t.Q6J("routerLink",t.DdM(6,tt)),t.xp6(4),t.Q6J("dataSource",r.heroesResult),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.totalHeroes)("pageSizeOptions",t.DdM(7,et)))},dependencies:[f.lW,f.RK,d.a8,d.dn,d.dk,d.n5,U.d,g.KE,g.hX,w.Hw,F.Nt,S.NW,v.YE,v.nU,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,G.gM,p.rH,A.rS],styles:[".hero-table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:150px}"]})}return o})();var c=a(6223),it=a(4300);let rt=(()=>{class o{constructor(){this.ref=(0,t.f3M)(t.SBq),this.ngModelChange=new t.vpe}onInput(e){this.ref.nativeElement.value=e.toUpperCase();const i=e.toUpperCase();this.onChange&&this.onChange(i),this.onTouched&&this.onTouched()}writeValue(e){this.ref.nativeElement.value=e.toUpperCase()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","appUppercase",""]],hostBindings:function(i,r){1&i&&t.NdJ("input",function(h){return r.onInput(h.target.value)})},outputs:{ngModelChange:"ngModelChange"},features:[t._Bn([{provide:c.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}])]})}return o})();const at=["inputName"];function nt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}const st=function(){return["/dashboard/heroes"]};let N=(()=>{class o{constructor(e,i,r,n,h){this.route=e,this.heroesService=i,this.modalService=r,this.router=n,this.formBuilder=h,this.isAddHero=!0,this.isSaving=!1}ngOnInit(){this.heroForm=this.formBuilder.group({name:["",c.kI.required],id:[{value:"",disabled:!0}]}),this.route.data.subscribe(e=>{this.titleCard=e.title}),this.route.paramMap.subscribe(e=>{if(e.get("id")){this.isAddHero=!1;const i=Number(e.get("id"));this.getHero(i)}})}getHero(e){this.modalService.showLoading(),this.heroesService.getHero(e).subscribe({next:i=>{i?.id?(this.heroForm.patchValue(i),this.inputName.nativeElement.select()):this.modalService.openSnackBar(`Hero with id ${e} not exists`,"error").afterDismissed().subscribe(()=>this.router.navigate(["dashboard/heroes"]))},complete:()=>this.modalService.closeLoading(),error:i=>{this.modalService.closeLoading(),this.modalService.openSnackBar(i,"error")}})}saveHero(){this.isSaving=!0;const e=this.heroForm.getRawValue();(this.isAddHero?this.heroesService.addHero(e):this.heroesService.modifyHero(e)).subscribe({next:r=>{this.modalService.openSnackBar(`Hero ${r.name} ${this.isAddHero?"added":"modified"}!!`,"info").afterDismissed().subscribe(()=>this.router.navigate(["dashboard/heroes"]))},error:r=>{this.modalService.openSnackBar(r,"error"),this.isSaving=!1}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(p.gz),t.Y36(T),t.Y36(x),t.Y36(p.F0),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-hero-modify"]],viewQuery:function(i,r){if(1&i&&t.Gf(at,5),2&i){let n;t.iGM(n=t.CRH())&&(r.inputName=n.first)}},decls:24,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"pt-3","pb-3"],["cdkTrapFocus","",1,"pt-3","row",3,"cdkTrapFocusAutoCapture"],[1,"col-2"],["type","text","matInput","","formControlName","id"],[1,"col-6"],["id","inputName","appUppercase","","type","text","matInput","","formControlName","name"],["inputName",""],[4,"ngIf"],["align","end",1,"p-3"],["mat-flat-button","","type","button",3,"routerLink"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],["saveButton",""]],template:function(i,r){if(1&i&&(t.TgZ(0,"mat-card")(1,"form",0),t.NdJ("ngSubmit",function(){return r.saveHero()}),t.TgZ(2,"mat-card-header",1)(3,"mat-card-title"),t._uU(4),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"mat-card-content")(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Id"),t.qZA(),t._UZ(11,"input",4),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",6,7),t.YNc(17,nt,4,0,"mat-error",8),t.qZA()()(),t.TgZ(18,"mat-card-actions",9)(19,"button",10),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",11,12),t._uU(23,"Save"),t.qZA()()()()),2&i){let n;t.xp6(1),t.Q6J("formGroup",r.heroForm),t.xp6(3),t.Oqu(r.titleCard),t.xp6(3),t.Q6J("cdkTrapFocusAutoCapture",r.isAddHero),t.xp6(10),t.Q6J("ngIf",null==(n=r.heroForm.get("name"))?null:n.hasError("required")),t.xp6(2),t.Q6J("routerLink",t.DdM(6,st)),t.xp6(2),t.Q6J("disabled",r.heroForm.invalid||r.isSaving)}},dependencies:[it.mK,f.lW,d.a8,d.hq,d.dn,d.dk,d.n5,U.d,g.KE,g.hX,g.TO,F.Nt,A.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,rt,p.rH]})}return o})();const lt=[{path:"",component:ot},{path:"add",component:N,data:{title:"Add Hero"}},{path:":id",component:N,data:{title:"Modify Hero"}}];let dt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(lt),p.Bz]})}return o})();var ct=a(7192);let mt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[ct.m,dt]})}return o})()}}]);