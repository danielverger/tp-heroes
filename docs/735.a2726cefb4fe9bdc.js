"use strict";(self.webpackChunkw2m_front=self.webpackChunkw2m_front||[]).push([[735],{6735:(ht,b,n)=>{n.r(b),n.d(b,{HeroesModule:()=>dt});var u=n(1896),S=n(9887),v=n(3566),L=n(3620),D=n(3997),C=n(9397),I=n(3019),B=n(7921),Y=n(4664),s=n(6223),t=n(5879),f=n(6306),J=n(8504);class M{constructor(){this.pageIndex=0,this.pageSize=10,this.name="",this.sortField="name",this.sortDirection="asc"}}var T=n(9862);let y=(()=>{class o{get lastFilter(){return this._lastFilter}constructor(e){this.http=e,this._lastFilter=new M}getHeroes(e){this._lastFilter=e;let i=(new T.LE).set("pageIndex",e.pageIndex).set("pageSize",e.pageSize).set("sortField",e.sortField).set("sortDirection",e.sortDirection);return e.name&&(i=i.set("name",e.name)),this.http.get("heroes",{params:i}).pipe((0,f.K)(this.handleError))}getHero(e){return this.http.get(`heroes/${e}`).pipe((0,f.K)(this.handleError))}addHero(e){return this.http.post("heroes",e).pipe((0,f.K)(this.handleError))}modifyHero(e){return this.http.put(`heroes/${e.id}`,e).pipe((0,f.K)(this.handleError))}deleteHero(e){return this.http.delete(`heroes/${e}`).pipe((0,f.K)(this.handleError))}handleError(){return(0,J._)(()=>"Something bad happened; please try again later.")}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(T.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var E=n(5940);let O=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-loader"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(i,r){1&i&&t._UZ(0,"mat-spinner",0)},dependencies:[E.Ou]})}return o})();var m=n(7700),g=n(2296);let Q=(()=>{class o{constructor(e,i){this.dialogRef=e,this.data=i}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.so),t.Y36(m.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-dialog"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","","align","end",1,"p-3"],["mat-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-button","",3,"mat-dialog-close"]],template:function(i,r){1&i&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",2)(5,"button",3),t._uU(6,"No"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Yes"),t.qZA()()),2&i&&(t.xp6(1),t.Oqu(r.data.title),t.xp6(2),t.hij(" ",r.data.message,"\n"),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[g.lW,m.ZT,m.uh,m.xY,m.H8]})}return o})();var x=n(2939);let N=(()=>{class o{constructor(e,i){this.dialog=e,this.snackBar=i,this.horizontalPosition="end",this.verticalPosition="top"}showLoading(){this.dialogRef||(this.dialogRef=this.dialog.open(O,{disableClose:!0,panelClass:"loader-dialog"}))}closeLoading(){this.dialogRef?.close(),this.dialogRef=null}confirmDialog(e,i){return this.dialog.open(Q,{width:"350px",data:{title:e,message:i}})}openSnackBar(e,i){const r=new x.u_;return r.duration="error"===i?2e3:1200,r.panelClass=`${i}-snackbar`,r.horizontalPosition=this.horizontalPosition,r.verticalPosition=this.verticalPosition,this.snackBar.open(e,"",r)}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(m.uw),t.LFG(x.ux))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var d=n(5195),F=n(6385),p=n(9157),w=n(617),U=n(2032),c=n(5313),R=n(2596),H=n(6814);const z=["inputName"];function G(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.filterNameControl.reset())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function $(o,l){1&o&&(t.TgZ(0,"th",18),t._uU(1," Id. "),t.qZA())}function k(o,l){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function K(o,l){1&o&&(t.TgZ(0,"th",18),t._uU(1," Name "),t.qZA())}function j(o,l){if(1&o&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function P(o,l){1&o&&t._UZ(0,"th",20)}const W=function(o){return[o]};function X(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"td",19)(1,"button",21),t.NdJ("click",function(){const a=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.deleteHero(a))}),t.TgZ(2,"mat-icon",22),t._uU(3,"delete"),t.qZA()(),t.TgZ(4,"button",23)(5,"mat-icon"),t._uU(6,"edit"),t.qZA()()()}if(2&o){const e=l.$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,W,e.id))}}function q(o,l){1&o&&t._UZ(0,"tr",24)}function V(o,l){1&o&&t._UZ(0,"tr",25)}const _=function(){return["add"]},tt=function(){return[5,10,20]};let et=(()=>{class o{constructor(e,i,r){this.heroesService=e,this.modalService=i,this.cd=r,this.displayedColumns=["id","name","actions"],this.totalHeroes=0,this.heroesResult=[],this.filterNameControl=new s.NI}ngOnInit(){}getObservableFilterName(){return this.filterNameControl.valueChanges.pipe((0,L.b)(500),(0,D.x)(),(0,C.b)(()=>this.paginator.pageIndex=0))}getObersrvableFilters(){return(0,I.T)(this.getObservableFilterName(),this.sort.sortChange,this.paginator.page).pipe((0,B.O)({}),(0,C.b)(()=>this.modalService.showLoading()),(0,Y.w)(()=>this.heroesService.getHeroes({pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortField:this.sort.active,sortDirection:this.sort.direction,name:this.inputName.nativeElement.value})),(0,C.b)(()=>this.modalService.closeLoading()))}ngAfterViewInit(){const{pageIndex:e,pageSize:i,name:r,sortDirection:a,sortField:h}=this.heroesService.lastFilter;this.inputName.nativeElement.value=r,this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.getObersrvableFilters().subscribe({next:({heroes:Z,total:mt})=>{this.paginator.pageIndex=e,this.paginator.pageSize=i,this.sort.active=h,this.sort.direction=a,this.heroesResult=Z,this.totalHeroes=mt},error:Z=>{this.modalService.openSnackBar(Z,"error"),this.modalService.closeLoading()}})}deleteHero(e){this.modalService.confirmDialog("Delete Hero",`Are you sure to delete ${e.name}?`).afterClosed().subscribe(i=>i&&this.heroesService.deleteHero(e.id).subscribe({next:r=>r&&this.modalService.openSnackBar(`${e.name} deleted!`,"info").afterOpened().subscribe(()=>{this.paginator.page.next(this.paginator)}),error:r=>this.modalService.openSnackBar(r,"error")}))}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(y),t.Y36(N),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-heroes-list"]],viewQuery:function(i,r){if(1&i&&(t.Gf(S.NW,5),t.Gf(v.YE,5),t.Gf(z,5)),2&i){let a;t.iGM(a=t.CRH())&&(r.paginator=a.first),t.iGM(a=t.CRH())&&(r.sort=a.first),t.iGM(a=t.CRH())&&(r.inputName=a.first)}},decls:30,vars:10,consts:[[1,"pt-3","pb-3"],[1,"d-flex","justify-content-between","pt-3"],[1,"col-5"],["matInput","",3,"formControl"],["inputName",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["mat-stroked-button","",3,"routerLink"],["mat-table","","matSort","","matSortDisableClear","",1,"hero-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of heroes",3,"length","pageSizeOptions"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","matTooltip","delete",3,"click"],["color","warn"],["mat-icon-button","","matTooltip","edit",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(t.TgZ(0,"mat-card")(1,"mat-card-header",0)(2,"mat-card-title"),t._uU(3,"Heroes"),t.qZA()(),t._UZ(4,"mat-divider"),t.TgZ(5,"mat-card-content")(6,"div",1)(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",3,4),t.YNc(12,G,3,0,"button",5),t.qZA(),t.TgZ(13,"button",6)(14,"mat-icon"),t._uU(15,"add"),t.qZA(),t._uU(16," Add Hero "),t.qZA()(),t.TgZ(17,"table",7),t.ynx(18,8),t.YNc(19,$,2,0,"th",9),t.YNc(20,k,2,1,"td",10),t.BQk(),t.ynx(21,11),t.YNc(22,K,2,0,"th",9),t.YNc(23,j,3,3,"td",10),t.BQk(),t.ynx(24,12),t.YNc(25,P,1,0,"th",13),t.YNc(26,X,7,3,"td",10),t.BQk(),t.YNc(27,q,1,0,"tr",14),t.YNc(28,V,1,0,"tr",15),t.qZA(),t._UZ(29,"mat-paginator",16),t.qZA()()),2&i&&(t.xp6(10),t.Q6J("formControl",r.filterNameControl),t.xp6(2),t.Q6J("ngIf",r.filterNameControl.value),t.xp6(1),t.Q6J("routerLink",t.DdM(8,_)),t.xp6(4),t.Q6J("dataSource",r.heroesResult),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.totalHeroes)("pageSizeOptions",t.DdM(9,tt)))},dependencies:[g.lW,g.RK,d.a8,d.dn,d.dk,d.n5,F.d,p.KE,p.hX,p.R9,w.Hw,U.Nt,S.NW,v.YE,v.nU,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,R.gM,H.O5,s.Fj,s.JJ,s.oH,u.rH,H.rS],styles:[".hero-table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:150px}"],changeDetection:0})}return o})();var ot=n(4300);let it=(()=>{class o{constructor(){this.ref=(0,t.f3M)(t.SBq),this.ngModelChange=new t.vpe}onInput(e){this.ref.nativeElement.value=e.toUpperCase();const i=e.toUpperCase();this.onChange&&this.onChange(i),this.onTouched&&this.onTouched()}writeValue(e){this.ref.nativeElement.value=e.toUpperCase()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","appUppercase",""]],hostBindings:function(i,r){1&i&&t.NdJ("input",function(h){return r.onInput(h.target.value)})},outputs:{ngModelChange:"ngModelChange"},features:[t._Bn([{provide:s.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}])]})}return o})();const rt=["inputName"];function nt(o,l){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}const at=function(){return["/dashboard/heroes"]};let A=(()=>{class o{constructor(e,i,r,a,h){this.route=e,this.heroesService=i,this.modalService=r,this.router=a,this.formBuilder=h,this.isAddHero=!0,this.isSaving=!1}ngOnInit(){this.heroForm=this.formBuilder.group({name:["",s.kI.required],id:[{value:"",disabled:!0}]}),this.route.data.subscribe(e=>{this.titleCard=e.title}),this.route.paramMap.subscribe(e=>{if(e.get("id")){this.isAddHero=!1;const i=Number(e.get("id"));this.getHero(i)}})}getHero(e){this.modalService.showLoading(),this.heroesService.getHero(e).subscribe({next:i=>{i?.id?(this.heroForm.patchValue(i),this.inputName.nativeElement.select()):this.modalService.openSnackBar(`Hero with id ${e} not exists`,"error").afterDismissed().subscribe(()=>this.router.navigate(["dashboard/heroes"]))},complete:()=>this.modalService.closeLoading(),error:i=>{this.modalService.closeLoading(),this.modalService.openSnackBar(i,"error")}})}saveHero(){this.isSaving=!0;const e=this.heroForm.getRawValue();(this.isAddHero?this.heroesService.addHero(e):this.heroesService.modifyHero(e)).subscribe({next:r=>{this.modalService.openSnackBar(`Hero ${r.name} ${this.isAddHero?"added":"modified"}!!`,"info").afterDismissed().subscribe(()=>this.router.navigate(["dashboard/heroes"]))},error:r=>{this.modalService.openSnackBar(r,"error"),this.isSaving=!1}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(u.gz),t.Y36(y),t.Y36(N),t.Y36(u.F0),t.Y36(s.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-hero-modify"]],viewQuery:function(i,r){if(1&i&&t.Gf(rt,5),2&i){let a;t.iGM(a=t.CRH())&&(r.inputName=a.first)}},decls:24,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"pt-3","pb-3"],["cdkTrapFocus","",1,"pt-3","row",3,"cdkTrapFocusAutoCapture"],[1,"col-2"],["type","text","matInput","","formControlName","id"],[1,"col-6"],["id","inputName","appUppercase","","type","text","matInput","","formControlName","name"],["inputName",""],[4,"ngIf"],["align","end",1,"p-3"],["mat-flat-button","","type","button",3,"routerLink"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],["saveButton",""]],template:function(i,r){if(1&i&&(t.TgZ(0,"mat-card")(1,"form",0),t.NdJ("ngSubmit",function(){return r.saveHero()}),t.TgZ(2,"mat-card-header",1)(3,"mat-card-title"),t._uU(4),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"mat-card-content")(7,"div",2)(8,"mat-form-field",3)(9,"mat-label"),t._uU(10,"Id"),t.qZA(),t._UZ(11,"input",4),t.qZA(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"Name"),t.qZA(),t._UZ(15,"input",6,7),t.YNc(17,nt,4,0,"mat-error",8),t.qZA()()(),t.TgZ(18,"mat-card-actions",9)(19,"button",10),t._uU(20,"Cancel"),t.qZA(),t.TgZ(21,"button",11,12),t._uU(23,"Save"),t.qZA()()()()),2&i){let a;t.xp6(1),t.Q6J("formGroup",r.heroForm),t.xp6(3),t.Oqu(r.titleCard),t.xp6(3),t.Q6J("cdkTrapFocusAutoCapture",r.isAddHero),t.xp6(10),t.Q6J("ngIf",null==(a=r.heroForm.get("name"))?null:a.hasError("required")),t.xp6(2),t.Q6J("routerLink",t.DdM(6,at)),t.xp6(2),t.Q6J("disabled",r.heroForm.invalid||r.isSaving)}},dependencies:[ot.mK,g.lW,d.a8,d.hq,d.dn,d.dk,d.n5,F.d,p.KE,p.hX,p.TO,U.Nt,H.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,it,u.rH]})}return o})();const st=[{path:"",component:et},{path:"add",component:A,data:{title:"Add Hero"}},{path:":id",component:A,data:{title:"Modify Hero"}}];let lt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(st),u.Bz]})}return o})();var ct=n(7192);let dt=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[ct.m,lt]})}return o})()}}]);